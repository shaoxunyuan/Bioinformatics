<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>基因注释与功能富集分析</title>
  <style>
    body {
      font-family: "Segoe UI", "Microsoft YaHei", sans-serif;
      line-height: 1.6;
      color: #333;
      max-width: 1100px;
      margin: 0 auto;
      padding-left: 260px; /* 给左侧导航预留空间 */
      background-color: #fafafa;
    }
    h1, h2, h3, h4 {
      color: #2c3e50;
    }
    h1 {
      text-align: center;
      margin: 20px 0 30px;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
    }
    h2 {
      margin-top: 30px;
      border-left: 4px solid #3498db;
      padding-left: 10px;
    }
    h3 {
      margin-top: 20px;
      color: #2980b9;
    }
    h4 {
      margin-top: 16px;
    }
    ul, ol {
      padding-left: 22px;
    }
    li {
      margin-bottom: 6px;
    }
    pre, code, textarea {
      background-color: #f4f4f4;
      border-radius: 4px;
      font-family: Consolas, Monaco, monospace;
      font-size: 0.9em;
    }
    pre {
      padding: 10px 12px;
      border-left: 3px solid #3498db;
      overflow-x: auto;
      margin: 12px 0;
    }
    textarea {
      width: 100%;
      min-height: 130px;
      padding: 10px;
      border: 1px solid #ddd;
      resize: vertical;
      box-sizing: border-box;
    }
    .note {
      background-color: #fff8e1;
      border-left: 4px solid #ffc107;
      padding: 10px 12px;
      margin: 15px 0;
      border-radius: 0 4px 4px 0;
      font-size: 0.95em;
    }
    .tip {
      background-color: #e3f2fd;
      border-left: 4px solid #2196f3;
      padding: 10px 12px;
      margin: 10px 0;
      border-radius: 0 4px 4px 0;
      font-size: 0.95em;
    }
    .warning {
      background-color: #ffebee;
      border-left: 4px solid #e53935;
      padding: 10px 12px;
      margin: 10px 0;
      border-radius: 0 4px 4px 0;
      font-size: 0.95em;
    }
    a {
      color: #1976d2;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    .step {
      background-color: #ffffff;
      border-radius: 6px;
      padding: 10px 14px;
      margin: 12px 0;
      box-shadow: 0 1px 3px rgba(0,0,0,0.04);
    }
    .step-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
    footer {
      margin: 40px 0 20px;
      text-align: center;
      color: #7f8c8d;
      font-size: 0.9em;
    }
    .highlight-box {
      border: 1px dashed #90caf9;
      background-color: #f1f8ff;
      padding: 8px 10px;
      border-radius: 4px;
      font-size: 0.9em;
      margin: 8px 0 4px;
    }

    /* ---------------- 左侧本章目录 ---------------- */
    .chapter-nav {
      position: fixed;
      top: 20px;
      left: 20px;
      width: 200px;
      background: #2c3e50;
      padding: 16px 14px;
      border-radius: 6px;
      color: white;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    }
    .chapter-nav h3 {
      color: #ecf0f1;
      margin-top: 0;
      margin-bottom: 10px;
      font-size: 1em;
      font-weight: bold;
    }
    .chapter-nav a {
      display: block;
      padding: 6px 0;
      color: #ecf0f1;
      font-size: 0.92em;
    }
    .chapter-nav a:hover {
      background: rgba(255,255,255,0.1);
      padding-left: 6px;
    }

    /* ---------------- 复制按钮 ---------------- */
    #copyBtn {
      float: right;
      margin-bottom: 6px;
      padding: 6px 12px;
      background:#3498db;
      color:white;
      border:none;
      border-radius:4px;
      cursor:pointer;
    }
    #copyBtn:hover {
      background:#217dbb;
    }

  </style>
</head>

<body>

<!-- 左侧本章目录 -->
<div class="chapter-nav">
  <h3>本章导航</h3>
  <a href="#intro">0. 教程目标</a>
  <a href="#gene-list">1. 示例基因列表</a>
  <a href="#string">2. STRING PPI</a>
  <a href="#string-input">· 输入基因</a>
  <a href="#string-options">· 参数设置</a>
  <a href="#string-interpret">· 结果解读</a>
  <a href="#enrichr">3. Enrichr 富集分析</a>
  <a href="#enrichr-input">· 输入基因</a>
  <a href="#enrichr-library">· 选择库</a>
  <a href="#enrichr-interpret">· 结果解读</a>
  <a href="#other-tools">4. 其他工具</a>
  <a href="#homework">5. 思考题</a>
</div>

<h1>基因注释与功能富集分析</h1>

<!-- 0. 教程目标 -->
<h2 id="intro">0. 教程目标</h2>
<p>用一组真实的 <strong>基因符号（Gene Symbol）</strong>，在浏览器里完成：</p>
<ol>
  <li>使用 <strong>STRING</strong> 构建蛋白互作网络（PPI）。</li>
  <li>使用 <strong>Enrichr</strong> 进行 GO / KEGG 富集分析。</li>
  <li>学会正确解读富集结果。</li>
</ol>

<div class="note">
  <strong>前提假设：</strong>  
  已经知道什么是基因 symbol（如 <code>TP53</code>、<code>EGFR</code>），并能在浏览器中复制粘贴文本。
</div>

<!-- 1. 示例基因列表 -->
<h2 id="gene-list">1. 示例基因列表（复制即可使用）</h2>
<p>下面是一组与细胞周期和癌症相关的经典基因，用于教学示例：</p>

<div class="highlight-box">
  先练习使用此示例基因列表，成功跑通流程后再替换为你自己的基因。
</div>

<!-- 一键复制按钮 -->
<button id="copyBtn">一键复制基因列表</button>

<textarea readonly id="geneTextarea">
TP53
EGFR
MYC
CDK1
CCNB1
CDKN1A
BCL2
MDM2
RB1
AKT1
PIK3CA
MAPK1
JUN
FOS
STAT3
</textarea>

<div class="tip">
  <strong>小提示：</strong>大多数在线数据库都接受这种“一行一个 symbol”的格式。
</div>


<!-- STRING -->
<h2 id="string">2. 使用 STRING 构建蛋白互作网络 (PPI)</h2>
<p>
  STRING 官方网站：<a href="https://string-db.org" target="_blank">https://string-db.org</a>
</p>

<h3 id="string-input">2.1 在 STRING 中输入基因列表</h3>

<div class="step">
  <div class="step-title">步骤 1：打开 STRING 网站</div>
  <ol>
    <li>浏览器输入：<code>https://string-db.org</code></li>
    <li>点击 “Multiple proteins”</li>
  </ol>
</div>

<div class="step">
  <div class="step-title">步骤 2：粘贴基因列表</div>
  <ol>
    <li>复制上面的基因列表</li>
    <li>粘贴到 STRING 文本框</li>
    <li>选择物种：<strong>Homo sapiens</strong></li>
  </ol>
  <div class="warning">
    物种选错 = 结果完全错误！
  </div>
</div>

<h3 id="string-options">2.2 参数设置</h3>

<div class="step">
  <div class="step-title">几个常用参数</div>
  <ul>
    <li><strong>Confidence score</strong>：推荐 0.4 起步</li>
    <li><strong>Network edges</strong>：可选择证据来源</li>
    <li><strong>Interactors</strong>：是否允许 STRING 自动扩展节点</li>
  </ul>
</div>

<h3 id="string-interpret">2.3 结果解读</h3>

<div class="step">
  <div class="step-title">(1) 网络结构图</div>
  <p>圆圈 = 蛋白；连线 = 相互作用；颜色 = 证据类型。</p>
</div>

<div class="step">
  <div class="step-title">(2) 节点信息</div>
  <p>点击节点可查看功能、别名、相互作用证据等。</p>
</div>

<div class="step">
  <div class="step-title">(3) 富集分析</div>
  <ul>
    <li>GO Biological Process</li>
    <li>KEGG Pathways</li>
  </ul>
  <div class="note">
    <strong>优先关注 FDR &lt; 0.05 的条目。</strong>
  </div>
</div>

<!-- Enrichr -->
<h2 id="enrichr">3. 使用 Enrichr 进行富集分析</h2>
<p>
  Enrichr 网站：<a href="https://maayanlab.cloud/Enrichr/" target="_blank">https://maayanlab.cloud/Enrichr/</a>
</p>

<h3 id="enrichr-input">3.1 输入基因列表</h3>

<div class="step">
  <div class="step-title">步骤</div>
  <ol>
    <li>打开 Enrichr</li>
    <li>粘贴基因</li>
    <li>提交</li>
  </ol>
</div>

<h3 id="enrichr-library">3.2 选择基因集库</h3>
<ul>
  <li>GO Biological Process</li>
  <li>KEGG</li>
  <li>Reactome</li>
</ul>

<h3 id="enrichr-interpret">3.3 结果解读</h3>

<div class="step">
  <div class="step-title">关键列</div>
  <ul>
    <li><strong>Term</strong></li>
    <li><strong>P-value</strong></li>
    <li><strong>Adjusted p-value</strong>（最重要）</li>
    <li><strong>Combined score</strong></li>
  </ul>
</div>

<!-- 其他工具 -->
<h2 id="other-tools">4. 其他常用在线工具</h2>
<ul>
  <li>g:Profiler</li>
  <li>DAVID</li>
  <li>Metascape</li>
</ul>

<!-- 作业 -->
<h2 id="homework">5. 练习与思考题</h2>

<h3>练习</h3>
<ol>
  <li>使用 STRING 构建 PPI 并截图</li>
  <li>记录前 5 个 KEGG 通路</li>
  <li>使用 Enrichr 跑富集分析</li>
  <li>比较 STRING 与 Enrichr 是否一致</li>
</ol>

<h3>思考题</h3>
<ul>
  <li>为什么需要 FDR 校正？</li>
  <li>Hub 基因是否一定最重要？</li>
  <li>遇到不相关通路如何处理？</li>
</ul>

<footer>
  <p>© 2025 南京中医药大学 人工智能与信息技术学院 医学信息教研室 袁少勋</p>
</footer>

<!-- 一键复制脚本 -->
<script>
document.getElementById("copyBtn").onclick = function () {
    const textarea = document.getElementById("geneTextarea");
    textarea.select();
    textarea.setSelectionRange(0, textarea.value.length);
    navigator.clipboard.writeText(textarea.value).then(() => {
        alert("基因列表已复制到剪贴板！");
    });
};
</script>

</body>
</html>
